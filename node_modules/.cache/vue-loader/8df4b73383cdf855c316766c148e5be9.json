{"remainingRequest":"C:\\Users\\haoyu Song\\Downloads\\前台项目\\sph_qiantai\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\haoyu Song\\Downloads\\前台项目\\sph_qiantai\\src\\pages\\pay\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\haoyu Song\\Downloads\\前台项目\\sph_qiantai\\src\\pages\\pay\\index.vue","mtime":1652872868750},{"path":"C:\\Users\\haoyu Song\\Downloads\\前台项目\\sph_qiantai\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\haoyu Song\\Downloads\\前台项目\\sph_qiantai\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\haoyu Song\\Downloads\\前台项目\\sph_qiantai\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\haoyu Song\\Downloads\\前台项目\\sph_qiantai\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovL+W8leWFpeS6jOe7tOeggeaPkuS7tg0KaW1wb3J0IFFSQ29kZSBmcm9tICJxcmNvZGUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiUGF5IiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy/mlK/ku5jnm7jlhbPkv6Hmga865pSv5LuY6ZKx5pWw44CB6K6i5Y2V5Y+344CB5LqM57u056CB5Zyw5Z2ADQogICAgICBwYXlJbmZvOiB7fSwNCiAgICAgIGNvZGU6ICIiLA0KICAgICAgdGltZXI6bnVsbA0KICAgIH07DQogIH0sDQogIC8v57uE5Lu25oyC6L295a6M5q+V77yM6I635Y+W5pSv5LuY55u45YWz5L+h5oGvDQogIG1vdW50ZWQoKSB7DQogICAgLy/ojrflj5bmlK/ku5jkv6Hmga8NCiAgICB0aGlzLmdldFBheUluZm8oKTsNCiAgICBjb25zb2xlLmxvZyh0aGlzLCdwYXknKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8v56uL5Y2z5pSv5LuY5oyJ6ZKuDQogICAgYXN5bmMgb3BlbigpIHsNCiAgICAgIC8v55Sf5oiQ5LiA5Liq5LqM57u056CBVVJMDQogICAgICBsZXQgdXJsID0gYXdhaXQgUVJDb2RlLnRvRGF0YVVSTCh0aGlzLnBheUluZm8uY29kZVVybCk7DQogICAgICAvL+esrOS4gOS4quWPguaVsDrljbPkuLrlhoXlrrnljLrln58NCiAgICAgIC8v56ys5LqM5Liq5Y+C5pWwOuagh+mimA0KICAgICAgLy/nrKzkuInkuKrlj4LmlbA657uE5Lu255qE6YWN572u6aG5DQogICAgICB0aGlzLiRhbGVydChgPGltZyBzcmM9JHt1cmx9PmAsICLor7fkvaDlvq7kv6HmiavnoIHmlK/ku5giLCB7DQogICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwgLy/lsIblrZfnrKbkuLLovazmjaLkuLrmoIfnrb4NCiAgICAgICAgY2VudGVyOiB0cnVlLCAvL+WxheS4rQ0KICAgICAgICBzaG93Q2xvc2U6IGZhbHNlLCAvL+WPs+S4iuinkueahOWFs+mXreaMiemSruS4jeaYvuekug0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuaUr+S7mOaIkOWKnyIsIC8v56Gu5a6a5oyJ6ZKu55qE5paH5pysDQogICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsIC8v5pi+56S65Y+W5raI5oyJ6ZKuDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLmlK/ku5jpgYfop4Hpl67popgiLCAvL+WPlua2iOaMiemSrueahOaWh+acrA0KICAgICAgICBjbG9zZU9uQ2xpY2tNb2RhbDogdHJ1ZSwgLy/ngrnlh7vpga7nvanlsYLlhbPpl61tZXNzYWdlYm94DQogICAgICAgIGJlZm9yZUNsb3NlOihhY3Rpb24sIGluc3RhbmNlLCBkb25lKT0+eyAvL+WcqOa2iOaBr+ebkuWtkOWFs+mXreS5i+WJjeS8muinpuWPkQ0KICAgICAgICAgICAvL2FjdGlvbuWPguaVsDrlj6/ku6XljLrliIbnlKjmiLfngrnlh7vnmoTmmK/lj5bmtojjgJBjYW5jZWzjgJHjgIHnoa7lrprjgJBjb25maXJt44CRDQogICAgICAgICAgIC8vaW5zdGFuY2Xlj4LmlbA65b2T5YmN5raI5oGv5qGG57uE5Lu2VkMNCiAgICAgICAgICAgLy9kb25l5Y+C5pWw77ya5piv5LiA5Liq5Ye95pWwLOWHveaVsOWPr+S7peWFs+mXrea2iOaBr+ebkuWtkA0KICAgICAgICAgICBpZihhY3Rpb249PSdjb25maXJtJyAmJiB0aGlzLmNvZGU9PTIwMCl7DQogICAgICAgICAgICAgIC8v5riF6Zmk5a6a5pe25ZmoDQogICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7DQogICAgICAgICAgICAgIC8v5YWz6Zet55uS5a2QDQogICAgICAgICAgICAgIGRvbmUoKTsNCiAgICAgICAgICAgICAgLy/ot6/nlLHot7PovawNCiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9wYXlzdWNjZXNzJyk7DQogICAgICAgICAgIH1lbHNlIGlmKGFjdGlvbj09J2NhbmNlbCcgJiYgdGhpcy5jb2RlIT0yMDApew0KICAgICAgICAgICAgICAgLy/muIXpmaTlrprml7blmagNCiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsNCiAgICAgICAgICAgICAgLy/lhbPpl63nm5LlrZANCiAgICAgICAgICAgICAgZG9uZSgpOw0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlK/ku5jpgYfop4Hpl67popjor7fogZTns7votoXnrqHosarlk6UnKTsNCiAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICAgIC8v5p+l6K+i5pSv5LuY57uT5p6cLOW8gOWQr+WumuaXtuWZqOavj+malOS4gOauteaXtumXtOivoumXruaUr+S7mOe7k+aenA0KICAgICB0aGlzLnRpbWVyICA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHsNCiAgICAgICAgLy/lj5Hor7fmsYLojrflj5bmlK/ku5jnu5PmnpwNCiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAucmVxUGF5UmVzdWx0KHRoaXMucGF5SW5mby5vcmRlcklkKTsNCiAgICAgICAgLy/ov5Tlm57mlbDmja7lvZPkuK3vvJpjb2RlPTIwMOS7o+ihqOaUr+S7mOaIkOWKnyAgY29kZT0yMDXmnKrmlK/ku5gNCiAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDIwMCkgew0KICAgICAgICAgIC8v5pSv5LuY5oiQ5Yqf5LqGDQogICAgICAgICAgLy/lrZjlgqjkuIDkuIvmlK/ku5jmiJDlip/nmoRjb2Rl5pWw5YC877yM6YCa6L+H5LuW5Yik5pat5pSv5LuY5piv5ZCm5oiQ5YqfDQogICAgICAgICAgdGhpcy5jb2RlID0gcmVzdWx0LmNvZGU7DQogICAgICAgICAgLy/muIXpmaTlrprml7blmagNCiAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOw0KICAgICAgICAgIC8v5YWz6ZetbWVzc2FnZWJveA0KICAgICAgICAgIHRoaXMuJG1zZ2JveC5jbG9zZSgpOyANCiAgICAgICAgICAvL+WcqOi3r+eUsei3s+i9rA0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcGF5U3VjY2VzcycpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIC8v5pyq5pSv5LuYDQogICAgICAgICAgdGhpcy5jb2RlID0gcmVzdWx0LmNvZGU7DQogICAgICAgIH0NCiAgICAgIH0sIDEwMDApOw0KICAgIH0sDQogICAgLy/ojrflj5bmlK/ku5jkv6Hmga8NCiAgICBhc3luYyBnZXRQYXlJbmZvKCkgew0KICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0IHRoaXMuJGh0dHAucmVxUGF5SW5mbyh0aGlzLiRyb3V0ZS5xdWVyeS5vcmRlcklkKTsNCiAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAyMDApIHsNCiAgICAgICAgdGhpcy5wYXlJbmZvID0gcmVzdWx0LmRhdGE7DQogICAgICB9DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/pay","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"pay-main\">\r\n      <div class=\"pay-container\">\r\n        <div class=\"checkout-tit\">\r\n          <h4 class=\"tit-txt\">\r\n            <span class=\"success-icon\"></span>\r\n            <span class=\"success-info\"\r\n              >订单提交成功，请您及时付款，以便尽快为您发货~~</span\r\n            >\r\n          </h4>\r\n          <div class=\"paymark\">\r\n            <span class=\"fl\"\r\n              >请您在提交订单<em class=\"orange time\">4小时</em\r\n              >之内完成支付，超时订单会自动取消。订单号：<em>{{\r\n                payInfo.orderId\r\n              }}</em></span\r\n            >\r\n            <span class=\"fr\"\r\n              ><em class=\"lead\">应付金额：</em\r\n              ><em class=\"orange money\">￥{{ payInfo.totalFee }}</em></span\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class=\"checkout-info\">\r\n          <h4>重要说明：</h4>\r\n          <ol>\r\n            <li>\r\n              尚品汇商城支付平台目前支持<span class=\"zfb\">支付宝</span\r\n              >支付方式。\r\n            </li>\r\n            <li>其它支付渠道正在调试中，敬请期待。</li>\r\n            <li>为了保证您的购物支付流程顺利完成，请保存以下支付宝信息。</li>\r\n          </ol>\r\n          <h4>\r\n            支付宝账户信息：（很重要，<span class=\"save\">请保存！！！</span>）\r\n          </h4>\r\n          <ul>\r\n            <li>支付帐号：11111111</li>\r\n            <li>密码：111111</li>\r\n            <li>支付密码：111111</li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"checkout-steps\">\r\n          <div class=\"step-tit\">\r\n            <h5>支付平台</h5>\r\n          </div>\r\n          <div class=\"step-cont\">\r\n            <ul class=\"payType\">\r\n              <li><img src=\"./images/pay2.jpg\" /></li>\r\n              <li><img src=\"./images/pay3.jpg\" /></li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"hr\"></div>\r\n\r\n          <div class=\"payshipInfo\">\r\n            <div class=\"step-tit\">\r\n              <h5>支付网银</h5>\r\n            </div>\r\n            <div class=\"step-cont\">\r\n              <ul class=\"payType\">\r\n                <li><img src=\"./images/pay10.jpg\" /></li>\r\n                <li><img src=\"./images/pay11.jpg\" /></li>\r\n                <li><img src=\"./images/pay12.jpg\" /></li>\r\n                <li><img src=\"./images/pay13.jpg\" /></li>\r\n                <li><img src=\"./images/pay14.jpg\" /></li>\r\n                <li><img src=\"./images/pay15.jpg\" /></li>\r\n                <li><img src=\"./images/pay16.jpg\" /></li>\r\n                <li><img src=\"./images/pay17.jpg\" /></li>\r\n                <li><img src=\"./images/pay18.jpg\" /></li>\r\n                <li><img src=\"./images/pay19.jpg\" /></li>\r\n                <li><img src=\"./images/pay20.jpg\" /></li>\r\n                <li><img src=\"./images/pay21.jpg\" /></li>\r\n                <li><img src=\"./images/pay22.jpg\" /></li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <div class=\"hr\"></div>\r\n\r\n          <div class=\"submit\">\r\n            <!--立即支付按钮:  -->\r\n            <a class=\"btn\" @click=\"open\">立即支付</a>\r\n          </div>\r\n          <div class=\"otherpay\">\r\n            <div class=\"step-tit\">\r\n              <h5>其他支付方式</h5>\r\n            </div>\r\n            <div class=\"step-cont\">\r\n              <span><a href=\"weixinpay.html\" target=\"_blank\">微信支付</a></span>\r\n              <span>中国银联</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//引入二维码插件\r\nimport QRCode from \"qrcode\";\r\nexport default {\r\n  name: \"Pay\",\r\n  data() {\r\n    return {\r\n      //支付相关信息:支付钱数、订单号、二维码地址\r\n      payInfo: {},\r\n      code: \"\",\r\n      timer:null\r\n    };\r\n  },\r\n  //组件挂载完毕，获取支付相关信息\r\n  mounted() {\r\n    //获取支付信息\r\n    this.getPayInfo();\r\n    console.log(this,'pay');\r\n  },\r\n  methods: {\r\n    //立即支付按钮\r\n    async open() {\r\n      //生成一个二维码URL\r\n      let url = await QRCode.toDataURL(this.payInfo.codeUrl);\r\n      //第一个参数:即为内容区域\r\n      //第二个参数:标题\r\n      //第三个参数:组件的配置项\r\n      this.$alert(`<img src=${url}>`, \"请你微信扫码支付\", {\r\n        dangerouslyUseHTMLString: true, //将字符串转换为标签\r\n        center: true, //居中\r\n        showClose: false, //右上角的关闭按钮不显示\r\n        confirmButtonText: \"支付成功\", //确定按钮的文本\r\n        showCancelButton: true, //显示取消按钮\r\n        cancelButtonText: \"支付遇见问题\", //取消按钮的文本\r\n        closeOnClickModal: true, //点击遮罩层关闭messagebox\r\n        beforeClose:(action, instance, done)=>{ //在消息盒子关闭之前会触发\r\n           //action参数:可以区分用户点击的是取消【cancel】、确定【confirm】\r\n           //instance参数:当前消息框组件VC\r\n           //done参数：是一个函数,函数可以关闭消息盒子\r\n           if(action=='confirm' && this.code==200){\r\n              //清除定时器\r\n              clearInterval(this.timer);\r\n              //关闭盒子\r\n              done();\r\n              //路由跳转\r\n              this.$router.push('/paysuccess');\r\n           }else if(action=='cancel' && this.code!=200){\r\n               //清除定时器\r\n              clearInterval(this.timer);\r\n              //关闭盒子\r\n              done();\r\n              this.$message.error('支付遇见问题请联系超管豪哥');\r\n           }\r\n        }\r\n      });\r\n      //查询支付结果,开启定时器每隔一段时间询问支付结果\r\n     this.timer  = setInterval(async () => {\r\n        //发请求获取支付结果\r\n        let result = await this.$http.reqPayResult(this.payInfo.orderId);\r\n        //返回数据当中：code=200代表支付成功  code=205未支付\r\n        if (result.code == 200) {\r\n          //支付成功了\r\n          //存储一下支付成功的code数值，通过他判断支付是否成功\r\n          this.code = result.code;\r\n          //清除定时器\r\n          clearInterval(this.timer);\r\n          //关闭messagebox\r\n          this.$msgbox.close(); \r\n          //在路由跳转\r\n          this.$router.push('/paySuccess');\r\n        } else {\r\n          //未支付\r\n          this.code = result.code;\r\n        }\r\n      }, 1000);\r\n    },\r\n    //获取支付信息\r\n    async getPayInfo() {\r\n      let result = await this.$http.reqPayInfo(this.$route.query.orderId);\r\n      if (result.code == 200) {\r\n        this.payInfo = result.data;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"less\" scoped>\r\n.pay-main {\r\n  margin-bottom: 20px;\r\n\r\n  .pay-container {\r\n    margin: 0 auto;\r\n    width: 1200px;\r\n\r\n    a:hover {\r\n      color: #4cb9fc;\r\n    }\r\n\r\n    .orange {\r\n      color: #e1251b;\r\n    }\r\n\r\n    .money {\r\n      font-size: 18px;\r\n    }\r\n\r\n    .zfb {\r\n      color: #e1251b;\r\n      font-weight: 700;\r\n    }\r\n\r\n    .checkout-tit {\r\n      padding: 10px;\r\n\r\n      .tit-txt {\r\n        font-size: 14px;\r\n        line-height: 21px;\r\n\r\n        .success-icon {\r\n          width: 30px;\r\n          height: 30px;\r\n          display: inline-block;\r\n          background: url(./images/icon.png) no-repeat 0 0;\r\n        }\r\n\r\n        .success-info {\r\n          padding: 0 8px;\r\n          line-height: 30px;\r\n          vertical-align: top;\r\n        }\r\n      }\r\n\r\n      .paymark {\r\n        overflow: hidden;\r\n        line-height: 26px;\r\n        text-indent: 38px;\r\n\r\n        .fl {\r\n          float: left;\r\n        }\r\n\r\n        .fr {\r\n          float: right;\r\n\r\n          .lead {\r\n            margin-bottom: 18px;\r\n            font-size: 15px;\r\n            font-weight: 400;\r\n            line-height: 22.5px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .checkout-info {\r\n      padding-left: 25px;\r\n      padding-bottom: 15px;\r\n      margin-bottom: 10px;\r\n      border: 2px solid #e1251b;\r\n\r\n      h4 {\r\n        margin: 9px 0;\r\n        font-size: 14px;\r\n        line-height: 21px;\r\n        color: #e1251b;\r\n      }\r\n\r\n      ol {\r\n        padding-left: 25px;\r\n        list-style-type: decimal;\r\n        line-height: 24px;\r\n        font-size: 14px;\r\n      }\r\n\r\n      ul {\r\n        padding-left: 25px;\r\n        list-style-type: disc;\r\n        line-height: 24px;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n\r\n    .checkout-steps {\r\n      border: 1px solid #ddd;\r\n      padding: 25px;\r\n\r\n      .hr {\r\n        height: 1px;\r\n        background-color: #ddd;\r\n      }\r\n\r\n      .step-tit {\r\n        line-height: 36px;\r\n        margin: 15px 0;\r\n      }\r\n\r\n      .step-cont {\r\n        margin: 0 10px 12px 20px;\r\n\r\n        ul {\r\n          font-size: 0;\r\n\r\n          li {\r\n            margin: 2px;\r\n            display: inline-block;\r\n            padding: 5px 20px;\r\n            border: 1px solid #ddd;\r\n            cursor: pointer;\r\n            line-height: 18px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .submit {\r\n      text-align: center;\r\n\r\n      .btn {\r\n        display: inline-block;\r\n        padding: 15px 45px;\r\n        margin: 15px 0 10px;\r\n        font: 18px \"微软雅黑\";\r\n        font-weight: 700;\r\n        border-radius: 0;\r\n        background-color: #e1251b;\r\n        border: 1px solid #e1251b;\r\n        color: #fff;\r\n        text-align: center;\r\n        vertical-align: middle;\r\n        cursor: pointer;\r\n        user-select: none;\r\n        text-decoration: none;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}